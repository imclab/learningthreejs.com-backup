
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Learning Three.js: Linkify, a tQuery Extension</title>
  <meta name="author" content="Jerome Etienne">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  

  <link rel="canonical" href="http://learningthreejs.com/blog/2012/02/27/linkify-tquery-extension/"/>
  <link href="/favicon.png" rel="shortcut icon" />
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="http://s3.amazonaws.com/ender-js/jeesh.min.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/LearningThreejs" rel="alternate" title="Learning Three.js" type="application/atom+xml"/>
  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-4037844-19']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>


  
  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>


  <!--Fonts from Google's Web font directory at http://google.com/webfonts -->
<link href='http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic' rel='stylesheet' type='text/css'>

</head>

<body  >
  <header><hgroup>
  <h1><a href="/">Learning Three.js</a></h1>
  
    <h2>or WebGL for Dummies</h2>
  
</hgroup>

</header>
  <nav role=navigation><ul role=subscription data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/LearningThreejs" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
<form action="http://google.com/search" method="get">
  <fieldset role="site-search">
    <input type="hidden" name="q" value="site:learningthreejs.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
<ul role=main-navigation>
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry">
  
  <header>
    
      <h1 class="entry-title">Linkify, a tQuery Extension</h1>
    
    
      <p class="meta">
	




<time datetime="2012-02-27 08:55:00 +0100" pubdate  updated >Feb 27<span>th</span>, 2012</time>



	<span style="text-transform: none;">

<span class="categories">
  
    <a class='category' href='/blog/categories/three-js/'>three.js</a>, <a class='category' href='/blog/categories/tquery/'>tquery</a>
  
</span>

</span>
      </p>
    
  </header>


<div class="entry-content"><p>This post is an update on
<a href="https://github.com/jeromeetienne/tquery">tquery</a> progress.
It is about <code>linkify</code>, a first experimental extension.
Thanks to it, any 3D object may become a link.
So  3D objects act as a <code>&lt;a&gt;</code> tag, i.e. the object becomes
clickable and clicking on it open a new url.
It is built on top of domEvents.
It is used to incoporate
<a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html">dom kindof events</a>
in 3D world.
We saw them a few week back in
<a href="http://learningthreejs.com/blog/2012/01/17/dom-events-in-3d-space/">&#8216;dom events in 3D space&#8217; post</a>.
Previous posts on tquery may be found <a href="/blog/categories/tquery/">here</a>.</p>

<!-- more -->




<center>
    <iframe width="425" height="349" src="http://www.youtube.com/embed/MlW7PeuXGDM" frameborder="0" allowfullscreen></iframe>
</center>


<p>Building extensions on top of others is kinda the point of an extension system.
My dream scenario is :
(1) People do plugins for three.js, like they do in jQuery).
(2) They share their work.
(3) They build on top of each other.
(4) Loop to 1.
All in opensource spirit. All good in my book. Ok enougth talk, let&#8217;s code.</p>

<h2>Dom Events in 3D Space</h2>

<p><em>domEvents</em> have been ported to tQuery.
It is an important part because jQuery developpers use this a lot, thru
<a href="http://api.jquery.com/on/">.on()</a>/<a href="http://api.jquery.com/off/">.off()</a>.</p>

<div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
</pre></td><td class='code' width='100%'><pre><code class='javascript'><div class='line'><span class="nx">tQuery</span><span class="p">(</span><span class="s1">&#39;cube&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;mouseover&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</div><div class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;somebody put the mouse over a cube&quot;</span><span class="p">);</span>
</div><div class='line'><span class="p">});</span>
</div></code></pre></td></tr></table></div>

<p>The supported events are click obviously,
<a href="http://www.quirksmode.org/dom/events/click.html">dblclick, mouseup, mousedown</a>
, <a href="http://www.quirksmode.org/dom/events/mouseover.html">mouseover and mouseout</a>.
It has been improved to better match
<a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html">actual dom events</a>.
The callback now receives a event object. It contains <code>.type</code> and <code>.target</code>
as described in <a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-Event">dom specification</a>.</p>

<div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
<span class='line'>2</span>
<span class='line'>3</span>
<span class='line'>4</span>
<span class='line'>5</span>
</pre></td><td class='code' width='100%'><pre><code class='javascript'><div class='line'><span class="nx">tQuery</span><span class="p">(</span><span class="s1">&#39;.myClass&#39;</span><span class="p">).</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</div><div class='line'>    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s2">&quot;An event of type&quot;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="s2">&quot;has been trigger on &quot;</span><span class="p">,</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">);</span>
</div><div class='line'>    <span class="c1">// If you wish to stop propagation, just do </span>
</div><div class='line'>    <span class="nx">event</span><span class="p">.</span><span class="nx">stopPropagation</span><span class="p">();</span>
</div><div class='line'><span class="p">});</span>
</div></code></pre></td></tr></table></div>

<p><a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-flow-bubbling">Event bubbling</a>
is now supported. So events are dispatched to the
<a href="http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget">target</a>
and follow its parent chain upward. It is possible to cancel propagation with an usual
<code>.stopPropagation()</code>.</p>

<h2>Linkify or How Any 3D Object May Become a Link</h2>

<p>Linkify is an experimental plugins built on top of <code>tquery.domevent</code>. It is
shown in the screencast.
It makes any 3D objects object act as a <code>&lt;a&gt;</code> tag, i.e. the object becomes
clickable and clicking on it open a new url. When the mouse is over it, an underline
is added to make it even more webpage like.
Code is rather short.</p>

<div class="highlight"><table cellpadding="0" cellspacing="0"><tr><td class="gutter"><pre class="line-numbers"><span class='line'>1</span>
</pre></td><td class='code' width='100%'><pre><code class='javascript'><div class='line'><span class="nx">tQuery</span><span class="p">(</span><span class="s1">&#39;text&#39;</span><span class="p">).</span><span class="nx">linkify</span><span class="p">(</span><span class="s1">&#39;http://example.com&#39;</span><span class="p">)</span>
</div></code></pre></td></tr></table></div>

<h2>Conclusion</h2>

<p>It has been quite time consuming to set up the basis for the project:
tests, bechmarks, docs, or plugins interdependancy resolution.
For each of those field, i had to review the various alternatives,
pick one and setting it up as properly as possible.</p>

<p>Here are the current choises, they may change in the future.
<a href="http://requirejs.org/">require.js</a> will be used for the dependancies between plugins.
Tests are done with <a href="http://visionmedia.github.com/mocha/">mocha</a>,
a javascript test framework for javascript which run in node.js and browser.
Later, we may improve that by testing the rendering output using
<a href="http://www.pixastic.com/">pixastic</a> to do
<a href="http://en.wikipedia.org/wiki/Mean_squared_error">statistical</a>
<a href="http://en.wikipedia.org/wiki/Peak_signal-to-noise_ratio">images</a>
<a href="http://en.wikipedia.org/wiki/Root_mean_square_deviation">comparison</a>.
Benchmarks are done with
<a href="http://benchmarkjs.com/">benchmarks.js</a>, a robust benchmarking library for javascript,
using
<a href="https://github.com/jeromeetienne/benchrunner">benchrunner</a>
as runner.
It is the engine behind the wellknown
<a href="http://jsperf.com/browse">jsperf</a>
site.
Inline documentation is written in <a href="http://code.google.com/p/jsdoc-toolkit/">jsdoc</a>
format using
<a href="http://www.thebrightlines.com/2010/05/06/new-template-for-jsdoctoolkit-codeview/">codeview</a>
template.</p>

<p>That&#8217;s all folks. Have fun :)</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Jerome Etienne</span></span>

      




<time datetime="2012-02-27 08:55:00 +0100" pubdate  updated >Feb 27<span>th</span>, 2012</time>



      

<span class="categories">
  
    <a class='category' href='/blog/categories/three-js/'>three.js</a>, <a class='category' href='/blog/categories/tquery/'>tquery</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://learningthreejs.com/blog/2012/02/27/linkify-tquery-extension/" data-via="learningthreejs" data-counturl="http://learningthreejs.com/blog/2012/02/27/linkify-tquery-extension/" >Tweet</a>
  
  
  <g:plusone size="medium"></g:plusone>
  
</div>

    
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread"><div id="disqus_thread"></div>
<script type="text/javascript">
  var disqus_shortname = 'learningthreejs';
  var disqus_identifier = 'http://learningthreejs.com/blog/2012/02/27/linkify-tquery-extension/';
  var disqus_url = 'http://learningthreejs.com/blog/2012/02/27/linkify-tquery-extension/';
  //var disqus_developer = 1;
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside role=sidebar>
  
    <style>
#avatar img {
	width	: 50%;
	float	: right;
	border			: .5em solid white;
	border-radius		: 0.3em;
	-webkit-border-radius	: 0.3em;
	-moz-border-radius	: 0.3em;
	
	margin-top		: 0.5em;
	margin-bottom		: 0.5em;
}
#avatar p a {
	text-decoration	: none;
}
#avatar p a:hover {
	text-decoration	: underline;
}
#avatar .hireme {
	text-align	: center;
	background	: white;
	padding		: 0.3em;

	border		: 3px solid grey;
	border-radius	: 0.3em;
	-webkit-border-radius: 0.3em;
	-moz@-border-radius: 0.3em;

	clear		: both;
}
#avatar .hireme:hover {
	color		: black;
	background	: grey;
}
</style>
<section id="avatar">
  <h1>Me - Jerome Etienne</h1>
  <img src="/data/jetienne-avatar.jpg"/>
  <p>
	I enjoy writing efficient and creative code.
	Sometimes i talk at conferences or give trainings.
  </p>
  <p>
	<a href="https://twitter.com/#!/jerome_etienne" target="_blank">@jerome_etienne</a><br/>
	<a href="https://github.com/jeromeetienne" target="_blank">github</a>
	<a href="https://plus.google.com/102848659911729905069/posts" target="_blank">google+</a>
  </p>
  <div class="hireme">
	<a href="mailto:jerome.etienne@gmail.com" target="_blank">Available for Hire</a>
  </div>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/06/05/3d-physics-with-three-js-and-physijs/">3D Physics With Three.js and Physijs</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/29/three-js-sportcar-on-ios/">Three.js Sport Car on iOS at 40fps</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/21/sport-car-in-webgl/">Sport Car in WebGL</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/15/punch-a-doom-character-in-augmented-reality/">Punch A Doom Character in Augmented Reality</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/05/08/sound-visualisation-vuemeter-in-webgl/">Sound Visualisation: a Vuemeter in WebGL</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("learningthreejs", 4, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
  
    <a href="http://twitter.com/learningthreejs" class="twitter-follow-button" data-width="208px" data-show-count="false">Follow @learningthreejs</a>
  
</section>




  
</aside>


    </div>
  </div>
  <footer><p>
  Copyright &copy; 2012 - Jerome Etienne -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
</body>
</html>
